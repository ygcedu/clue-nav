{"version":3,"sources":["main.js"],"names":["loadWallpaper","options","format","idx","n","mkt","imgUrl","$","ajax","url","dataType","type","success","req","images","document","body","style","backgroundImage","$searchForm","$suggests","smartReminder","words","sugurl","replace","window","bing","sug","json","empty","attr","AS","Results","Suggests","forEach","suggest","$suggest","Txt","prependTo","on","children","val","innerText","submit","script","createElement","src","getElementsByTagName","appendChild","searchInit","elements","css","find","end","e","className","target","getAttribute","$siteList","$lastLi","x","localStorage","getItem","xObject","JSON","parse","hashMap","name","logoType","logo","save","string","stringify","setItem","simplifyUrl","render","remove","site","index","simurl","$li","insertBefore","open","stopPropagation","console","log","result","confirm","splice","currentTarget","parentElement","innerHTML","toUpperCase","error","addClass","submitForm","siteName","siteLink","siteIconsType","siteIcon","indexOf","push","closeForm","removeClass","querySelector","reset","addEventListeners","onbeforeunload","localName","key","i","length","toLowerCase","mousemove","clientWidth","documentElement","classes","pageX","y","pageY","change","value","keydown","active","text","prev","next","delegateTarget","backgroundColor"],"mappings":"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","file":"main.0a176e61.js","sourceRoot":"..\\src","sourcesContent":["// 加载必应每日壁纸\r\nconst loadWallpaper = () => {\r\n  const options = {\r\n    format: 'js',\r\n    idx: '0',\r\n    n: '1',\r\n    mkt: 'zh-CN'\r\n  };\r\n\r\n  let imgUrl = '/bing/' + 'HPImageArchive.aspx?' + `format=${options.format}&idx=${options.idx}&n=${options.n}&mkt=${options.mkt}`;\r\n// 这里 bing 就是 Nginx 匹配规则，可自定义\r\n\r\n  $.ajax({\r\n    url: imgUrl,\r\n    dataType: 'json',\r\n    type: 'GET',\r\n    success: (req) => {\r\n      imgUrl = 'https://cn.bing.com' + req.images[0].url;\r\n      document.body.style.backgroundImage = `url(${imgUrl})`;\r\n    },\r\n  });\r\n};\r\n\r\nconst $searchForm = $('.searchForm');\r\nconst $suggests = $('.search-suggest');\r\n// 搜索提示\r\nconst smartReminder = (words) => {\r\n  if (words) {\r\n    //组装查询地址\r\n    let sugurl = 'http://api.bing.com/qsonhs.aspx?type=cb&q=#content#&cb=window.bing.sug';\r\n    sugurl = sugurl.replace('#content#', words);\r\n    //定义回调函数\r\n    window.bing = {\r\n      sug: function (json) {\r\n        $suggests.empty();\r\n        $suggests.attr('class', 'search-suggest show');\r\n        if (json.AS.Results) {\r\n          json.AS.Results[0].Suggests.forEach((suggest) => {\r\n            const $suggest = $(`<li class=\"suggest-item\">${suggest.Txt}</li>`).prependTo($suggests);\r\n\r\n            $suggest.on('click', $('li'), function () {\r\n              $searchForm.children('input').val(this.innerText);\r\n              $searchForm.submit();\r\n            });\r\n          });\r\n        }\r\n      }\r\n    };\r\n\r\n    //动态添加JS脚本\r\n    const script = document.createElement('script');\r\n    script.src = sugurl;\r\n    document.getElementsByTagName('head')[0].appendChild(script);\r\n  }\r\n};\r\n\r\n//初始化搜索引擎并添加点击事件\r\nlet searchInit = (elements) => {\r\n  //初始化搜索引擎\r\n  // $('.google').addClass('searchSelected');\r\n  $(`.google`).css('background', '#4285F433').css(`color`, `#4285F4`).find(`svg`).css(`font-size`, `20px`);\r\n  $searchForm.attr('action', `https://www.google.com/search`).find(`input`).attr(`name`, `q`).end().find(`use`).attr(`xlink:href`, `#icon-google`);\r\n\r\n  //添加点击事件\r\n  elements.find('li').on('click', (e) => {\r\n    let className = e.target.getAttribute('class');\r\n    //设置查询地址\r\n    switch (className) {\r\n      case 'google':\r\n        $searchForm.attr(`action`, `https://www.google.com/search`);\r\n        $searchForm.find(`input`).attr(`name`, `q`);\r\n        break;\r\n      case 'baidu':\r\n        $searchForm.attr(`action`, `https://www.baidu.com/s`);\r\n        $searchForm.find(`input`).attr(`name`, `wd`);\r\n        break;\r\n      case 'bing':\r\n        $searchForm.attr(`action`, `https://www.bing.com/search`);\r\n        $searchForm.find(`input`).attr(`name`, `q`);\r\n        break;\r\n      case 'sougou':\r\n        $searchForm.attr(`action`, `https://www.sogou.com/sogou`);\r\n        $searchForm.find(`input`).attr(`name`, `query`);\r\n        break;\r\n      case 'duckduckgo':\r\n        $searchForm.attr(`action`, `https://duckduckgo.com/`);\r\n        $searchForm.find(`input`).attr(`name`, `q`);\r\n        break;\r\n    }\r\n\r\n    //清除当前样式\r\n    // $(`.searchTab`).removeClass();\r\n    $(`.searchTab`).find(`li`).attr(`style`, ``).css(`font-weight`, `600`).find(`svg`).css(`font-size`, `0`);\r\n    //添加点击样式\r\n    $(`.${className}`).css(`background`, `#4285F433`).css(`color`, `#4285F4`).find(`svg`).css(`font-size`, `20px`);\r\n    //修改 input 内 icon\r\n    $searchForm.find(`use`).attr(`xlink:href`, `#icon-${className}`);\r\n  });\r\n};\r\n\r\nloadWallpaper();\r\n\r\nconst $siteList = $('.siteList');\r\nconst $lastLi = $siteList.find('li.last');\r\nconst x = localStorage.getItem('x');\r\nconst xObject = JSON.parse(x);\r\n\r\n// 如果cookie内没有x值则取后面的默认值\r\nconst hashMap = xObject || [\r\n  {name: 'A站', url: 'https://www.acfun.cn', logoType: 'text', logo: 'A'},\r\n  {name: 'B站', url: 'https://www.bilibili.com', logoType: 'link', logo: 'B'}\r\n];\r\n\r\nconst save = () => {\r\n  const string = JSON.stringify(hashMap);\r\n  // 本地缓存cookie中保存x变量，值为$siteList字符串\r\n  localStorage.setItem('x', string);\r\n};\r\n\r\nconst simplifyUrl = (url) => {\r\n  return url.replace('https://', '')\r\n    .replace('http://', '')\r\n    .replace('www.', '')\r\n    .replace(/\\/.*/, ''); // 删除以/开头的内容\r\n};\r\n\r\nconst render = () => {\r\n  // 清除除了最后一个新增按钮以外的其他site\r\n  $siteList.find('li:not(.last)').remove();\r\n\r\n  hashMap.forEach((site, index) => {\r\n    const simurl = simplifyUrl(site.url);\r\n    const logo = site.logoType === 'link' ? site.logo : 'https://www.' + simurl + '/favicon.ico';\r\n\r\n    const $li = $(`\r\n        <li>\r\n            <div class=\"site\">\r\n                <div class=\"logo\">\r\n                    <img class= \"favicon\" src= ${JSON.stringify(logo)}> \r\n                </div>\r\n                <div class=\"close\">\r\n                    <svg class=\"icon\">\r\n                        <use xlink:href=\"#icon-close\"></use>\r\n                    </svg>\r\n                </div>\r\n                <div class=\"link\">${site.name}</div>\r\n            </div>\r\n        </li>\r\n        `).insertBefore($lastLi);\r\n\r\n    $li.on('click', () => {\r\n      window.open(site.url);\r\n    });\r\n\r\n    // fixme:删除遇到找不到图标时会报错，数据就保存不下来(重复监听？)\r\n    $li.on('click', '.close', (e) => {\r\n      // console.log('这里')\r\n      // 阻止冒泡（阻止不了a标签的跳转事件）\r\n      e.stopPropagation();\r\n      console.log(index);\r\n\r\n      let result = window.confirm(`是否确认删除 ${site.name} ？`);\r\n      if (result) {\r\n        hashMap.splice(index, 1);\r\n        render();\r\n      }\r\n    });\r\n\r\n    $li.find('.favicon').on('error', (e) => {\r\n      // e.currentTarget.style.display = 'none';\r\n      try {\r\n        // 找不到图标时,用首字母替换掉图片\r\n        e.currentTarget.parentElement.innerHTML = simurl[0].toUpperCase();\r\n      } catch (error) {}\r\n    });\r\n  });\r\n  searchInit($('.searchTab'));\r\n};\r\n\r\n// 第一次加载页面渲染$siteList\r\nrender();\r\n\r\n$('.addButton').on('click', () => {\r\n  $('.addSiteForm').addClass('showDialog');\r\n  $('.mask').css('display', 'block');\r\n});\r\n\r\n//提交表单事件\r\nlet submitForm = () => {\r\n  const siteName = $('input[name = \"siteName\"]').val();\r\n  let siteLink = $('input[name = \"siteLink\"]').val();\r\n  const siteIconsType = $('input[name = \"siteIconsType\"]:checked').val();\r\n  let siteIcon = $('input[name = \"siteIcon\"]').val();\r\n\r\n  if (siteLink === '') {\r\n    $('.siteLink').css('background-color', '#f8d9d9').attr('placeholder', '网站地址为必填项！');\r\n  } else {\r\n    if (siteLink.indexOf('http') !== 0) {\r\n      siteLink = 'https://' + siteLink;\r\n    }\r\n\r\n    hashMap.push({\r\n      name: siteName,\r\n      url: siteLink,\r\n      logoType: siteIconsType,\r\n      logo: siteIcon\r\n    });\r\n\r\n    save();\r\n    render();\r\n    closeForm();\r\n  }\r\n};\r\n\r\n//form 表单关闭事件\r\nlet closeForm = () => {\r\n  $('.addSiteForm').removeClass('showDialog');\r\n  // $addSiteForm.css(`transform`, `translateY(-100%)`);\r\n  $('.mask').css('display', 'none');\r\n  // $('.siteIconLink').css('display', 'flex');\r\n  document.querySelector('.addSiteForm').reset();\r\n};\r\n\r\nconst addEventListeners = () => {\r\n  // 监听onbeforeunload事件\r\n  window.onbeforeunload = () => {\r\n    console.log('页面关闭了');\r\n    save();\r\n  };\r\n\r\n  $(document).on('keypress', (e) => {\r\n    if (e.target.localName === 'body') {\r\n      const {key} = e;\r\n      for (let i = 0; i < hashMap.length; i++) {\r\n        if (hashMap[i].logo.toLowerCase() === key) {\r\n          window.open(hashMap[i].url);\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  $(document).mousemove((e) => {\r\n    const clientWidth = document.documentElement.clientWidth;\r\n    // const clientHeight = document.documentElement.clientHeight;\r\n    let classes = 'head';\r\n    const x = e.pageX;\r\n    const y = e.pageY;\r\n    if (x < (clientWidth - 138) / 2) {\r\n      classes += ' left';\r\n    } else if (x > (clientWidth - 138) / 2 + 138) {\r\n      classes += ' right';\r\n    }\r\n\r\n    if (y < 83) {\r\n      classes += ' top';\r\n    } else if (y > 196) {\r\n      classes += ' bottom';\r\n    }\r\n    $('.head').attr('class', classes);\r\n  });\r\n\r\n  // 搜索建议：blog.51cto.com/1095221645/1916022\r\n\r\n  //根据 siteIconType 的值改变 表单中 siteIcon 链接项的可见性\r\n  $('input[name = \"siteIconsType\"]').change(function () {\r\n    console.log(this.value);\r\n    if (this.value === 'link') {\r\n      $('.siteIconLink').css('display', 'flex');\r\n    } else {\r\n      $('.siteIconLink').css('display', 'none');\r\n    }\r\n  });\r\n\r\n  $('.searchForm > input').keydown(function (e) {\r\n    // smartReminder(this.value, e.key);\r\n    const active = $('.suggest-item.active');\r\n    let text = '';\r\n    switch (e.key) {\r\n      case 'ArrowUp':\r\n        if (active.length > 0) {\r\n          active.removeClass('active');\r\n          text = active.prev().addClass('active').text();\r\n        } else {\r\n          text = $('.search-suggest>.suggest-item:last-child').addClass('active').text();\r\n        }\r\n        $searchForm.children('input').val(text);\r\n        break;\r\n      case 'ArrowDown':\r\n        if (active.length > 0) {\r\n          active.removeClass('active');\r\n          text = active.next().addClass('active').text();\r\n        } else {\r\n          text = $('.search-suggest>.suggest-item:first-child').addClass('active').text();\r\n        }\r\n        $searchForm.children('input').val(text);\r\n        break;\r\n    }\r\n  });\r\n\r\n  $('.searchForm > input').on('input', function (e) {\r\n    smartReminder(e.delegateTarget.value);\r\n  });\r\n\r\n  $('body').on('click', () => {\r\n    $suggests.attr('class', 'search-suggest hide');\r\n  });\r\n\r\n  $('.siteLink').on('focus', (e) => {\r\n    e.currentTarget.style.backgroundColor = '#fff';\r\n  });\r\n};\r\n\r\naddEventListeners();\r\n\r\n\r\n"]}