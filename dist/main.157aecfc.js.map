{"version":3,"sources":["main.js"],"names":["$siteList","$","$lastLi","find","x","localStorage","getItem","xObject","JSON","parse","hashMap","logo","url","simplifyUrl","replace","render","remove","forEach","node","index","$li","stringify","insertBefore","on","window","open","e","stopPropagation","splice","currentTarget","parentElement","innerHTML","prompt","indexOf","console","log","push","toUpperCase","onbeforeunload","string","setItem","document","target","localName","key","i","length","toLowerCase"],"mappings":"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","file":"main.157aecfc.js","sourceRoot":"..\\src","sourcesContent":["const $siteList = $('.siteList')\r\nconst $lastLi = $siteList.find('li.last')\r\nconst x = localStorage.getItem('x')\r\nconst xObject = JSON.parse(x)\r\n\r\n// 如果cookie内没有x值则取后面的默认值\r\nconst hashMap = xObject || [\r\n    {logo: 'A', url: 'https://www.acfun.cn'},\r\n    {logo: 'B', url: 'https://www.bilibili.com'}\r\n]\r\n\r\nconst simplifyUrl = (url) => {\r\n    return url.replace('https://', '')\r\n        .replace('http://', '')\r\n        .replace('www.', '')\r\n        .replace(/\\/.*/, '') // 删除以/开头的内容\r\n}\r\n\r\nconst render = () => {\r\n    // 清除除了最后一个新增按钮以外的其他site\r\n    $siteList.find('li:not(.last)').remove()\r\n\r\n    hashMap.forEach((node, index) => {\r\n\r\n        // console.log(index)\r\n        const $li = $(`\r\n        <li>\r\n            <div class=\"site\">\r\n                <div class=\"logo\">\r\n                    <img class= \"favicon\" src= ${JSON.stringify(\"https://www.\" + simplifyUrl(node.url) + \"/favicon.ico\")}> \r\n                </div>\r\n                <div class=\"link\">${simplifyUrl(node.url)}</div>\r\n                <div class=\"close\">\r\n                    <svg class=\"icon\">\r\n                        <use xlink:href=\"#icon-close\"></use>\r\n                    </svg>\r\n                </div>\r\n            </div>\r\n        </li>\r\n        `).insertBefore($lastLi)\r\n\r\n        // 用js来控制页面跳转（更加灵活），替换掉a标签\r\n        $li.on('click', () => {\r\n            window.open(node.url)\r\n        })\r\n\r\n        $li.on('click', '.close', (e) => {\r\n            // console.log('这里')\r\n            // 阻止冒泡（阻止不了a标签的跳转事件）\r\n            e.stopPropagation()\r\n            hashMap.splice(index, 1)\r\n            render()\r\n        })\r\n\r\n        $(\".favicon\").on(\"error\", (e) => {\r\n            // e.currentTarget.style.display = 'none';\r\n            // 找不到图标时,用首字母替换掉图片\r\n            e.currentTarget.parentElement.innerHTML = node.logo;\r\n        })\r\n    })\r\n}\r\n\r\n// 第一次加载页面渲染$siteList\r\nrender()\r\n\r\n$('.addButton').on('click', () => {\r\n    let url = window.prompt(\"请问你要添加的网址是啥？\")\r\n    if (url.indexOf('http') !== 0) {\r\n        url = 'https://' + url\r\n    }\r\n    console.log(url)\r\n    hashMap.push({\r\n        logo: simplifyUrl(url)[0].toUpperCase(),\r\n        url: url\r\n    })\r\n\r\n    // 重新渲染$siteList\r\n    render()\r\n})\r\n\r\n\r\n// 监听onbeforeunload事件\r\nwindow.onbeforeunload = () => {\r\n    console.log('页面关闭了')\r\n    const string = JSON.stringify(hashMap)\r\n    // 本地缓存cookie中保存x变量，值为$siteList字符串\r\n    localStorage.setItem('x', string)\r\n}\r\n\r\n$(document).on('keypress', (e) => {\r\n    if (e.target.localName === \"body\"){\r\n        console.log(e.key)\r\n        const {key} = e\r\n        for (let i = 0; i < hashMap.length; i++) {\r\n            if (hashMap[i].logo.toLowerCase() === key) {\r\n                window.open(hashMap[i].url)\r\n            }\r\n        }\r\n    }\r\n})"]}